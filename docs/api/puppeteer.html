<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>utils.puppeteer · Apify SDK</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;a name=&quot;puppeteer&quot;&gt;&lt;/a&gt;"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="utils.puppeteer · Apify SDK"/><meta property="og:type" content="website"/><meta property="og:url" content="https://sdk.apify.com/index.html"/><meta property="og:description" content="&lt;a name=&quot;puppeteer&quot;&gt;&lt;/a&gt;"/><meta property="og:image" content="https://sdk.apify.com/img/apify_logo.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://sdk.apify.com/img/apify_logo.png"/><link rel="shortcut icon" href="/img/favicon.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/monokai-sublime.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/css/main.css"/></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/apify_logo.svg" alt="Apify SDK"/><h2 class="headerTitleWithLogo">Apify SDK</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li><li class="siteNavGroupActive"><a href="/docs/examples/helloworld" target="_self">Guide</a></li><li class=""><a href="/docs/examples/basiccrawler" target="_self">Examples</a></li><li class="siteNavGroupActive"><a href="/docs/api/apify" target="_self">Reference</a></li><li class=""><a href="https://github.com/apifytech/apify-js" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Reference</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Guide</h3><ul><li class="navListItem"><a class="navItem" href="/docs/examples/helloworld">Hello World</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Reference</h3><ul><li class="navListItem"><a class="navItem" href="/docs/api/apify">Apify</a></li><li class="navListItem"><a class="navItem" href="/docs/api/autoscaledpool">AutoscaledPool</a></li><li class="navListItem"><a class="navItem" href="/docs/api/basiccrawler">BasicCrawler</a></li><li class="navListItem"><a class="navItem" href="/docs/api/cheeriocrawler">CheerioCrawler</a></li><li class="navListItem"><a class="navItem" href="/docs/api/dataset">Dataset</a></li><li class="navListItem"><a class="navItem" href="/docs/api/keyvaluestore">KeyValueStore</a></li><li class="navListItem"><a class="navItem" href="/docs/api/pseudourl">PseudoUrl</a></li><li class="navListItem"><a class="navItem" href="/docs/api/puppeteercrawler">PuppeteerCrawler</a></li><li class="navListItem"><a class="navItem" href="/docs/api/puppeteerpool">PuppeteerPool</a></li><li class="navListItem"><a class="navItem" href="/docs/api/request">Request</a></li><li class="navListItem"><a class="navItem" href="/docs/api/requestlist">RequestList</a></li><li class="navListItem"><a class="navItem" href="/docs/api/requestqueue">RequestQueue</a></li><li class="navListItem"><a class="navItem" href="/docs/api/utils">utils</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/api/puppeteer">utils.puppeteer</a></li></ul></div></div></section></div><script>
            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docMainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">utils.puppeteer</h1></header><article><div><span><p><a name="puppeteer"></a></p>
<p>A namespace that contains various Puppeteer utilities.</p>
<p><strong>Example usage:</strong></p>
<pre><code class="hljs css language-javascript"><span class="hljs-keyword">const</span> Apify = <span class="hljs-built_in">require</span>(<span class="hljs-string">'apify'</span>);
<span class="hljs-keyword">const</span> { puppeteer } = Apify.utils;

<span class="hljs-comment">// Open https://www.example.com in Puppeteer</span>
<span class="hljs-keyword">const</span> browser = <span class="hljs-keyword">await</span> Apify.launchPuppeteer();
<span class="hljs-keyword">const</span> page = <span class="hljs-keyword">await</span> browser.newPage();
<span class="hljs-keyword">await</span> page.goto(<span class="hljs-string">'https://www.example.com'</span>);

<span class="hljs-comment">// Inject jQuery into a page</span>
<span class="hljs-keyword">await</span> puppeteer.injectJQuery(page);
</code></pre>
<ul>
<li><a href="#puppeteer"><code>puppeteer</code></a> : <code>object</code>
<ul>
<li><a href="#puppeteer.hideWebDriver"><code>.hideWebDriver(page)</code></a> ⇒ <code>Promise</code></li>
<li><a href="#puppeteer.injectFile"><code>.injectFile(page, filePath)</code></a> ⇒ <code>Promise</code></li>
<li><a href="#puppeteer.injectJQuery"><code>.injectJQuery(page)</code></a> ⇒ <code>Promise</code></li>
<li><a href="#puppeteer.injectUnderscore"><code>.injectUnderscore(page)</code></a> ⇒ <code>Promise</code></li>
<li><a href="#puppeteer.enqueueLinks"><code>.enqueueLinks(page, selector, pseudoUrls, requestQueue)</code></a> ⇒ <code>Promise&lt;Array&lt;RequestOperationInfo&gt;&gt;</code></li>
<li><a href="#puppeteer.blockResources"><code>.blockResources(page, resourceTypes)</code></a> ⇒ <code>Promise</code></li>
<li><a href="#puppeteer.cacheResponses"><code>.cacheResponses(page, cache, responseUrlRules)</code></a> ⇒ <code>Promise</code></li>
<li><a href="#puppeteer.compileScript"><code>.compileScript(scriptString, context)</code></a> ⇒ <code>function</code></li>
</ul></li>
</ul>
<p><a name="puppeteer.hideWebDriver"></a></p>
<h2><a class="anchor" aria-hidden="true" id="puppeteerhidewebdriverpage-code-promise-code"></a><a href="#puppeteerhidewebdriverpage-code-promise-code" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>puppeteer.hideWebDriver(page)</code> ⇒ <code>Promise</code></h2>
<p>Hides certain Puppeteer fingerprints from the page, in order to help avoid detection of the crawler.
The function should be called on a newly-created page object before navigating to the target crawled page.</p>
<table>
<thead>
<tr>
<th>Param</th><th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>page</code></td><td><code>Page</code></td>
</tr>
<tr>
<td colspan="3"><p>Puppeteer <a href="https://pptr.dev/#?product=Puppeteer&show=api-class-page" target="_blank"><code>Page</code></a> object.</p>
</td></tr></tbody>
</table>
<a name="puppeteer.injectFile"></a>
<h2><a class="anchor" aria-hidden="true" id="puppeteerinjectfilepage-filepath-code-promise-code"></a><a href="#puppeteerinjectfilepage-filepath-code-promise-code" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>puppeteer.injectFile(page, filePath)</code> ⇒ <code>Promise</code></h2>
<p>Injects a JavaScript file into a Puppeteer page.
Unlike Puppeteer's <code>addScriptTag</code> function, this function works on pages
with arbitrary Cross-Origin Resource Sharing (CORS) policies.</p>
<table>
<thead>
<tr>
<th>Param</th><th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>page</code></td><td><code>Page</code></td>
</tr>
<tr>
<td colspan="3"><p>Puppeteer <a href="https://pptr.dev/#?product=Puppeteer&show=api-class-page" target="_blank"><code>Page</code></a> object.</p>
</td></tr><tr>
<td><code>filePath</code></td><td><code>String</code></td>
</tr>
<tr>
<td colspan="3"><p>File path</p>
</td></tr></tbody>
</table>
<a name="puppeteer.injectJQuery"></a>
<h2><a class="anchor" aria-hidden="true" id="puppeteerinjectjquerypage-code-promise-code"></a><a href="#puppeteerinjectjquerypage-code-promise-code" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>puppeteer.injectJQuery(page)</code> ⇒ <code>Promise</code></h2>
<p>Injects the <a href="https://jquery.com/" target="_blank"><code>jQuery</code></a> library into a Puppeteer page.
jQuery is often useful for various web scraping and crawling tasks,
e.g. to extract data from HTML elements using CSS selectors.</p>
<p>Beware that the injected jQuery object will be set to the <code>window.$</code> variable and thus it might cause conflicts with
libraries included by the page that use the same variable (e.g. another version of jQuery).</p>
<table>
<thead>
<tr>
<th>Param</th><th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>page</code></td><td><code>Page</code></td>
</tr>
<tr>
<td colspan="3"><p>Puppeteer <a href="https://pptr.dev/#?product=Puppeteer&show=api-class-page" target="_blank"><code>Page</code></a> object.</p>
</td></tr></tbody>
</table>
<a name="puppeteer.injectUnderscore"></a>
<h2><a class="anchor" aria-hidden="true" id="puppeteerinjectunderscorepage-code-promise-code"></a><a href="#puppeteerinjectunderscorepage-code-promise-code" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>puppeteer.injectUnderscore(page)</code> ⇒ <code>Promise</code></h2>
<p>Injects the <a href="https://underscorejs.org/" target="_blank"><code>Underscore.js</code></a> library into a Puppeteer page.
Beware that the injected Underscore object will be set to the <code>window._</code> variable and thus it might cause conflicts with
libraries included by the page that use the same variable.</p>
<table>
<thead>
<tr>
<th>Param</th><th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>page</code></td><td><code>Page</code></td>
</tr>
<tr>
<td colspan="3"><p>Puppeteer <a href="https://github.com/GoogleChrome/puppeteer/blob/master/docs/api.md#class-page">Page</a> object.</p>
</td></tr></tbody>
</table>
<a name="puppeteer.enqueueLinks"></a>
<h2><a class="anchor" aria-hidden="true" id="puppeteerenqueuelinkspage-selector-pseudourls-requestqueue-code-promise-lt-array-lt-requestoperationinfo-gt-gt-code"></a><a href="#puppeteerenqueuelinkspage-selector-pseudourls-requestqueue-code-promise-lt-array-lt-requestoperationinfo-gt-gt-code" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>puppeteer.enqueueLinks(page, selector, pseudoUrls, requestQueue)</code> ⇒ <code>Promise&lt;Array&lt;RequestOperationInfo&gt;&gt;</code></h2>
<p>Finds HTML elements matching a CSS selector, clicks the elements and if a redirect is triggered and destination URL matches
one of the provided <a href="pseudourl"><code>PseudoUrl</code></a>s, then the function enqueues that URL to a given request queue.
To create a Request object function uses <code>requestTemplate</code> from a matching <a href="pseudourl"><code>PseudoUrl</code></a>.</p>
<p><em>WARNING</em>: This is work in progress. Currently the function doesn't click elements and only takes their <code>href</code> attribute and so
is working only for link (<code>a</code>) elements, but not for buttons or JavaScript links.</p>
<p><strong>Returns</strong>: <code>Promise&lt;Array&lt;RequestOperationInfo&gt;&gt;</code> - Promise that resolves to an array of <a href="../typedefs/requestoperationinfo"><code>RequestOperationInfo</code></a> objects.</p>
<table>
<thead>
<tr>
<th>Param</th><th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>page</code></td><td><code>Page</code></td>
</tr>
<tr>
<td colspan="3"><p>Puppeteer <a href="https://pptr.dev/#?product=Puppeteer&show=api-class-page" target="_blank"><code>Page</code></a> object.</p>
</td></tr><tr>
<td><code>selector</code></td><td><code>String</code></td>
</tr>
<tr>
<td colspan="3"><p>CSS selector matching elements to be clicked.</p>
</td></tr><tr>
<td><code>pseudoUrls</code></td><td><code><a href="pseudourl">Array&lt;PseudoUrl&gt;</a></code></td>
</tr>
<tr>
<td colspan="3"><p>An array of <a href="pseudourl"><code>PseudoUrl</code></a>s matching the URLs to be enqueued.</p>
</td></tr><tr>
<td><code>requestQueue</code></td><td><code><a href="requestqueue">RequestQueue</a></code></td>
</tr>
<tr>
<td colspan="3"><p>Request queue object where URLs will be enqueued.</p>
</td></tr></tbody>
</table>
<a name="puppeteer.blockResources"></a>
<h2><a class="anchor" aria-hidden="true" id="puppeteerblockresourcespage-resourcetypes-code-promise-code"></a><a href="#puppeteerblockresourcespage-resourcetypes-code-promise-code" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>puppeteer.blockResources(page, resourceTypes)</code> ⇒ <code>Promise</code></h2>
<p>Forces the browser tab to block loading certain page resources,
using the <code>Page.setRequestInterception(value)</code> method.
This is useful to speed up crawling of websites.</p>
<p>The resource types to block can be controlled using the <code>resourceTypes</code> parameter,
which indicates the types of resources as they are perceived by the rendering engine.
The following resource types are currently supported:
<code>document</code>, <code>stylesheet</code>, <code>image</code>, <code>media</code>, <code>font</code>, <code>script</code>, <code>texttrack</code>, <code>xhr</code>, <code>fetch</code>,
<code>eventsource</code>, <code>websocket</code>, <code>manifest</code>, <code>other</code>.
For more details, see Puppeteer's
<a href="https://pptr.dev/#?product=Puppeteer&show=api-requestresourcetype" target="_blank">Request.resourceType() documentation</a>.</p>
<p>By default, the function blocks these resource types: <code>stylesheet</code>, <code>font</code>, <code>image</code>, <code>media</code>.</p>
<table>
<thead>
<tr>
<th>Param</th><th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>page</code></td><td><code>Page</code></td>
</tr>
<tr>
<td colspan="3"><p>Puppeteer <a href="https://pptr.dev/#?product=Puppeteer&show=api-class-page" target="_blank"><code>Page</code></a> object.</p>
</td></tr><tr>
<td><code>resourceTypes</code></td><td><code>Array&lt;String&gt;</code></td>
</tr>
<tr>
<td colspan="3"><p>Array of resource types to block.</p>
</td></tr></tbody>
</table>
<a name="puppeteer.cacheResponses"></a>
<h2><a class="anchor" aria-hidden="true" id="puppeteercacheresponsespage-cache-responseurlrules-code-promise-code"></a><a href="#puppeteercacheresponsespage-cache-responseurlrules-code-promise-code" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>puppeteer.cacheResponses(page, cache, responseUrlRules)</code> ⇒ <code>Promise</code></h2>
<p>Enables caching of intercepted responses into a provided object. Automatically enables request interception in Puppeteer.
<em>IMPORTANT</em>: Caching responses stores them to memory, so too loose rules could cause memory leaks for longer running crawlers.
This issue should be resolved or atleast mitigated in future iterations of this feature.</p>
<table>
<thead>
<tr>
<th>Param</th><th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>page</code></td><td><code>Page</code></td>
</tr>
<tr>
<td colspan="3"><p>Puppeteer <a href="https://pptr.dev/#?product=Puppeteer&show=api-class-page" target="_blank"><code>Page</code></a> object.</p>
</td></tr><tr>
<td><code>cache</code></td><td><code>Object</code></td>
</tr>
<tr>
<td colspan="3"><p>Object in which responses are stored</p>
</td></tr><tr>
<td><code>responseUrlRules</code></td><td><code>Array&lt;(String|RegExp)&gt;</code></td>
</tr>
<tr>
<td colspan="3"><p>List of rules that are used to check if the response should be cached.
  String rules are compared as page.url().includes(rule) while RegExp rules are evaluated as rule.test(page.url()).</p>
</td></tr></tbody>
</table>
<a name="puppeteer.compileScript"></a>
<h2><a class="anchor" aria-hidden="true" id="puppeteercompilescriptscriptstring-context-code-function-code"></a><a href="#puppeteercompilescriptscriptstring-context-code-function-code" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>puppeteer.compileScript(scriptString, context)</code> ⇒ <code>function</code></h2>
<p>Compiles a Puppeteer script into an async function that may be executed at any time
by providing it with the following object:</p>
<pre><code class="hljs">{
   <span class="hljs-attr">page</span>: Page,
   <span class="hljs-attr">request</span>: Request,
}
</code></pre>
<p>Where <code>page</code> is a Puppeteer <a href="https://pptr.dev/#?product=Puppeteer&show=api-class-page" target="_blank"><code>Page</code></a>
and <code>request</code> is a <a href="request"><code>Request</code></a>.</p>
<p>The function is compiled by using the <code>scriptString</code> parameter as the function's body,
so any limitations to function bodies apply. Return value of the compiled function
is the return value of the function body = the <code>scriptString</code> parameter.</p>
<p>As a security measure, no globals such as <code>process</code> or <code>require</code> are accessible
from within the function body. Note that the function does not provide a safe
sandbox and even though globals are not easily accessible, malicious code may
still execute in the main process via prototype manipulation. Therefore you
should only use this function to execute sanitized or safe code.</p>
<p>Custom context may also be provided using the <code>context</code> parameter. To improve security,
make sure to only pass the really necessary objects to the context. Preferably making
secured copies beforehand.</p>
<p><strong>Returns</strong>: <code>function</code> - <code>async ({ page, request }) =&gt; { scriptString }</code></p>
<table>
<thead>
<tr>
<th>Param</th><th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>scriptString</code></td><td><code>String</code></td>
</tr>
<tr>
</tr><tr>
<td><code>context</code></td><td><code>Object</code></td>
</tr>
<tr>
</tr></tbody>
</table>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/api/utils"><span class="arrow-prev">← </span><span>Previous</span></a></div></div></div><nav class="onPageNav docOnPageNav"><ul class="toc-headings"><li><a href="#puppeteerhidewebdriverpage-code-promise-code"><code>puppeteer.hideWebDriver(page)</code> ⇒ Promise</a></li><li><a href="#puppeteerinjectfilepage-filepath-code-promise-code"><code>puppeteer.injectFile(page, filePath)</code> ⇒ Promise</a></li><li><a href="#puppeteerinjectjquerypage-code-promise-code"><code>puppeteer.injectJQuery(page)</code> ⇒ Promise</a></li><li><a href="#puppeteerinjectunderscorepage-code-promise-code"><code>puppeteer.injectUnderscore(page)</code> ⇒ Promise</a></li><li><a href="#puppeteerenqueuelinkspage-selector-pseudourls-requestqueue-code-promise-lt-array-lt-requestoperationinfo-gt-gt-code"><code>puppeteer.enqueueLinks(page, selector, pseudoUrls, requestQueue)</code> ⇒ Promise&lt;Array&lt;RequestOperationInfo&gt;&gt;</a></li><li><a href="#puppeteerblockresourcespage-resourcetypes-code-promise-code"><code>puppeteer.blockResources(page, resourceTypes)</code> ⇒ Promise</a></li><li><a href="#puppeteercacheresponsespage-cache-responseurlrules-code-promise-code"><code>puppeteer.cacheResponses(page, cache, responseUrlRules)</code> ⇒ Promise</a></li><li><a href="#puppeteercompilescriptscriptstring-context-code-function-code"><code>puppeteer.compileScript(scriptString, context)</code> ⇒ function</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/apify_logo.svg" alt="Apify SDK" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/en/examples/helloworld.html">Guide</a><a href="/docs/en/examples/basiccrawler.html">Examples</a><a href="/docs/en/api/apify.html">Reference</a></div><div><h5>Community</h5><a href="https://stackoverflow.com/questions/tagged/apify" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://twitter.com/apify" target="_blank" rel="noreferrer noopener">Twitter</a><a href="https://www.facebook.com/apifytech" target="_blank" rel="noreferrer noopener">Facebook</a></div><div><h5>More</h5><a href="https://www.apify.com" target="_blank">Apify Cloud Platform</a><a href="https://docusaurus.io" target="_blank">Docusaurus</a><a href="https://github.com/apifytech/apify-js" target="_blank">GitHub</a></div></section><section class="copyright">Copyright © 2018 Apify Technologies s.r.o.</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '64ce2544769e34add0e6402688c86e92',
                indexName: 'apify_sdk',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>